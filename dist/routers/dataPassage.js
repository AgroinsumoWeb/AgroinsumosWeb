"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));require("dotenv").config();var _require=require("express"),Router=_require.Router,jwt=require("jsonwebtoken"),router=Router(),Searchs=require("../models/searchs"),verifyToken=function(a,b,c){var d=a.headers.authorization;d?jwt.verify(d,process.env.SECRET_TOKEN,function(d,e){return d?b.status(400).json({mensaje:"El token ingresado es invalido"}):void(a.decoded=e,c())}):b.status(500).send({mensaje:"Se necesita un Token para poder operar."})};router.post("/",verifyToken,function(){var a=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function a(b,c){var d,e,f,g,h,i;return _regenerator["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=b.body,e=d.search,f=d.user,g=d.office,h=d.branchoffice,a.prev=1,i=new Searchs({search:e,user:f,office:g,branchoffice:h}),a.next=5,i.save();case 5:return a.abrupt("return",c.status(200).json("Los datos fueron almacenados correctamente"));case 8:return a.prev=8,a.t0=a["catch"](1),a.abrupt("return",c.status(500).json(a.t0.message));case 11:case"end":return a.stop();}},a,null,[[1,8]])}));return function(){return a.apply(this,arguments)}}()),module.exports=router;